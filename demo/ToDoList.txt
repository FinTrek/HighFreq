############
# ToDo list for package HighFreq: high frequency data scrubbing

https://cran.r-project.org/doc/manuals/r-release/R-admin.html
R CMD INSTALL HighFreq
or
install.packages("C:/Develop/R/HighFreq", repos=NULL, type="source")

# create package vignette from *.Rd files
R CMD Rd2pdf HighFreq

### comments
Calculating returns on 1 second bars doesn't make sense for two reasons: 
First, because the changes in price are very small, comparable to the precision of prices (number of significant digits).
As a result, price changes on 1 second bars are either zero or low multiples of the precision. 
Second, the 1 second bar prices bounce randomly between static bid and ask prices (the bid-ask bounce).  
Therefore 1-second bar returns carry almost no information.


### tasks pending

- [ ] modify functions vol_ohlc() and skew_ohlc() to accomodate case when open price isn't equal to previous close price.
	add argument "open_to_close" with default value TRUE

- [ ] Replace caTools with TTR functions

- [ ] include util package 

- [ ] fix .Rd documentation file building error
use these Google searches:
r package error namespace "not an exported object"
r rd files "all text must be in a section"
r roxygen "no man pages found in package"
r roxygen Error in get(name, envir = env) : object not found
# understanding common errors in R
https://github.com/noamross/zero-dependency-problems/blob/master/misc/stack-overflow-common-r-errors.md
http://roxygenready.github.io/

- [ ] create "tests" directory

- [ ] create data documention
http://r-pkgs.had.co.nz/data.html
http://kbroman.org/pkg_primer/pages/data.html

- [ ] calculate volume-weighted moments and compare them to standard moments
	add volume-weighting to vol_ohlc() and skew_ohlc()

- [ ] rename?
	save_rets_OHLC to rets_OHLC

add logical arg as option to aggregate data or not

calculate rets from scrubbed data

calculate statistics (moments, quantiles) on tick and OHLC data and save them in files

create function to estimate beta from HFreq data

create function to forecast skewness
Show that variance is predictable over time 
Show that skewness is not predictable over time (Harvey and Siddique, 1999), 
so variables other than lagged skewness are required to forecast skewness.
Show that idiosyncratic volatility is a strong predictor of idiosyncratic skewness.

study time dependence of mean, variance, skewness, and kurtosis
show that skewness and kurtosis decay with time



calculate tail shape of return frequency distribution and demonstrate power law


analyze code in functions:
	rmOutliers
	loadInstruments
	getSymbols.FI - done


adopt .Rdata file and directory conventions

analyze code in:
	scripts_hist.R - done
	Rhistory 07-12-14.txt - done
	copy anything useful and then delete files - done


### tasks finished

- [x] create function for performing daily, weekly, and monthly seasonality aggregations

- [x] rename functions run_*() to roll_*()

- [x] rename save_OHLC() to save_scrub_agg()

- [x] in save_rets_OHLC() update documentation

- [x] in save_OHLC() combine sapply loops into one

- [x] in save_OHLC() and save_rets() pass scrub params to scrub_agg

added timezone to argument list

created function save_TAQ()
	saves scrubbed TAQ and/or OHLC data in daily files
	similar to save_OHLC, but doesn't aggregate and saves into multiple files

created function calc_rets()
	calculate returns of time series

created function save_rets() (similar to save_OHLC): 
	scrub and aggregate data, calculate returns, and save them

created function save_rets_OHLC()
	similar to save_rets, but assumes clean OHLC input data
	- no scrubbing or aggregation


### commits

# commit 03-16-15

added functions: calc_rets, save_rets, save_TAQ
updated functions: save_OHLC, scrub_TAQ
added "data" folder
updated roxygen documentation


# commit 03-01-15
added roxygen documentation

created functions:
save_OHLC
scrub_TAQ

scrub_agg:
change time zone
to trading hours
merge duplicate time stamps using make.index.unique - no
remove duplicate time stamps using duplicated
calculate mid price?
NA omit mid price
convert NA volumes to zero
replace NA trade prices with mid prices
scrub on mid price:
	bid-offer spread
	if bid-offer spread too wide then use trade price?
	hairlines


in save_OHLC
add save dir
coerce using quantmod.OHLC? - no

create function save_TAQ:
save scrubbed daily TAQ data to daily files
use quantmod standard headers - quantmod naming conventions

create function similar to getSymbols (?):
load and rbind TAQ data (without scrubbing or aggregating)


# commit 02-17-15
renamed many functions and variables
added roxygen comments
added demo folder and files
edited README
updated HighFreq-package.Rd



